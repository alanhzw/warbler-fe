import{r as F,v as P,h as w,w as A,n as ie,x as ae,e as V,o as u,c as p,b as l,t as $,g as r,y as x,F as U,j as E,z as G,u as c,E as se,A as de,B as W,C as j,p as q,a as B,_ as N,D as re,d as z,G as ce,H as K,I as ue,J,k as _e,K as S,l as fe,L as me,M as ve}from"./index-3b37cb81.js";const Q=[{label:"年",value:"year"},{label:"月",value:"month"},{label:"天",value:"day"}],X=[{label:"天",value:"day"},{label:"小时",value:"hour"},{label:"分",value:"minute"},{label:"秒",value:"second"}],Z={day:365,month:12,year:1},ee={second:1*1e3,minute:1*1e3*60,hour:1*1e3*60*60,day:1*1e3*60*60*24},H=(e,t)=>{const n=t.find(o=>o.value===e);return n==null?void 0:n.label},te=e=>{const t=new Date,n=new Date(1950,0,1);return e<n||e>t},pe=e=>{function t(){e(),requestAnimationFrame(t)}requestAnimationFrame(t)},ge=e=>{const t=F(P());pe(()=>{t.value=P()});const n=w(()=>P(e.value.birthday)),o=w(()=>n.value.add(Number(e.value.age),"year")),g=w(()=>o.value.diff(n.value,"millisecond")),a=w(()=>({year:t.value.diff(n.value,"year",!0).toFixed(1),month:t.value.diff(n.value,"month",!0).toFixed(1),day:t.value.diff(n.value,"day",!0).toFixed(1),hour:t.value.diff(n.value,"hour",!0).toFixed(1),minute:t.value.diff(n.value,"minute",!0).toFixed(1),second:t.value.diff(n.value,"second",!0).toFixed(),millisecond:t.value.diff(n.value,"millisecond",!0).toFixed()})),i=w(()=>({year:o.value.diff(t.value,"year",!0).toFixed(1),month:o.value.diff(t.value,"month",!0).toFixed(1),day:o.value.diff(t.value,"day",!0).toFixed(1),hour:o.value.diff(t.value,"hour",!0).toFixed(1),minute:o.value.diff(t.value,"minute",!0).toFixed(1),second:o.value.diff(t.value,"second",!0).toFixed(),millisecond:o.value.diff(t.value,"millisecond",!0).toFixed()})),_=d=>{const{frequency:m,time:s,timeUnit:v}=d;return Z[m]*ee[v]*Number(s)},h=w(()=>{const d=Array.from({length:Number(e.value.gridNum)},(v,f)=>({id:f,backgroundColor:"#e2e2e2",className:"",event:""})),m=e.value.lifeData.map(v=>({...v,millisecond:_(v)*Number(i.value.year)}));m.unshift({frequency:"",event:"",time:"",timeUnit:"",backgroundColor:e.value.pastBackgroundColor,millisecond:Number(a.value.millisecond),className:"past"});let s=0;return m.forEach(v=>{const f=Number((v.millisecond/g.value).toFixed(2)),C=Math.floor(f*d.length);Array.from({length:C}).forEach(()=>{s<d.length&&(d[s].backgroundColor=v.backgroundColor,d[s].className=v.className||"",d[s].event=v.event),s+=1})}),d});return{pastTime:a,deathTime:o,remainTime:i,grids:h}};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ye=e=>typeof e<"u";function he(e){return JSON.parse(JSON.stringify(e))}function be(e,t,n,o={}){var g,a,i;const{clone:_=!1,passive:h=!1,eventName:d,deep:m=!1,defaultValue:s,shouldEmit:v}=o,f=ae(),C=n||(f==null?void 0:f.emit)||((g=f==null?void 0:f.$emit)==null?void 0:g.bind(f))||((i=(a=f==null?void 0:f.proxy)==null?void 0:a.$emit)==null?void 0:i.bind(f==null?void 0:f.proxy));let k=d;t||(t="modelValue"),k=k||`update:${t.toString()}`;const Y=y=>_?typeof _=="function"?_(y):he(y):y,T=()=>ye(e[t])?Y(e[t]):s,L=y=>{v?v(y)&&C(k,y):C(k,y)};if(h){const y=T(),M=F(y);let b=!1;return A(()=>e[t],D=>{b||(b=!0,M.value=Y(D),ie(()=>b=!1))}),A(M,D=>{!b&&(D!==e[t]||m)&&L(D)},{deep:m}),M}else return w({get(){return T()},set(y){L(y)}})}const le=e=>(q("data-v-52dab8bf"),e=e(),B(),e),xe={class:"life-item"},ke={class:"life-item__no"},Ce=le(()=>l("div",{class:"life-item__text"},"你平均每",-1)),$e=le(()=>l("div",{class:"life-item__text"},"的时间为",-1)),De=V({__name:"life-item",props:{lifeItemData:null,lifeItemIndex:null},emits:["update:lifeItemData","handleDelete"],setup(e,{emit:t}){const n=e,o=be(n,"lifeItemData",t),g=()=>{t("handleDelete",n.lifeItemIndex)};return(a,i)=>{const _=se,h=de,d=W,m=j;return u(),p("div",xe,[l("div",ke,$(`${e.lifeItemIndex+3}.`),1),Ce,r(h,{modelValue:c(o).frequency,"onUpdate:modelValue":i[0]||(i[0]=s=>c(o).frequency=s),placeholder:"请选择",style:{width:"100px"}},{default:x(()=>[(u(!0),p(U,null,E(c(Q),s=>(u(),G(_,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(d,{modelValue:c(o).event,"onUpdate:modelValue":i[1]||(i[1]=s=>c(o).event=s),clearable:"","show-word-limit":"",maxlength:10,style:{width:"240px","margin-left":"8px"},placeholder:"请输入"},null,8,["modelValue"]),$e,r(d,{modelValue:c(o).time,"onUpdate:modelValue":i[2]||(i[2]=s=>c(o).time=s),maxlength:3,style:{width:"80px"},placeholder:"请输入"},null,8,["modelValue"]),r(h,{modelValue:c(o).timeUnit,"onUpdate:modelValue":i[3]||(i[3]=s=>c(o).timeUnit=s),placeholder:"请选择",style:{width:"100px",margin:"0 8px"}},{default:x(()=>[(u(!0),p(U,null,E(c(X),s=>(u(),G(_,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(m,{modelValue:c(o).backgroundColor,"onUpdate:modelValue":i[4]||(i[4]=s=>c(o).backgroundColor=s)},null,8,["modelValue"]),l("i",{class:"iconfont icon-shanchu",style:{"margin-left":"8px",cursor:"pointer"},onClick:g})])}}});const we=N(De,[["__scopeId","data-v-52dab8bf"]]),Ve=e=>{const{frequency:t,time:n,timeUnit:o}=e;return Z[t]*ee[o]*Number(n)/365},Ne=e=>new Promise((t,n)=>{Number(e.age)>100&&n(new Error("你还想活多久，长生不老得了呗")),e.lifeData.every(i=>{const{frequency:_,time:h,timeUnit:d}=i;return _&&h&&d})||n(new Error("你瞎啊，看不见有没填的吗")),e.lifeData.reduce((i,_)=>i+Ve(_),0)>24*60*60*1e3&&n(new Error("每天都超过 24 小时了，你咋不上天呢")),e.lifeData.some((i,_)=>e.lifeData.some((h,d)=>_!==d&&i.backgroundColor===h.backgroundColor))&&n(new Error("用一样的色儿，你能分出来吗")),t(!0)});const I=e=>(q("data-v-a0c5cbde"),e=e(),B(),e),Ie=I(()=>l("div",{class:"config-life-drawer_header"},"分配人生",-1)),Fe={class:"config-life-body"},Ue={class:"config-life-body_life-item"},Ee=I(()=>l("div",{class:"config-life-body_life-item__no"},"1.",-1)),Se=I(()=>l("div",{class:"config-life-body_life-item__text"},"你于",-1)),Me=I(()=>l("div",{class:"config-life-body_life-item__text"},"出生，你能活到",-1)),qe=I(()=>l("div",{class:"config-life-body_life-item__text"},"岁",-1)),Be={class:"config-life-body_life-item"},Ye=I(()=>l("div",{class:"config-life-body_life-item__no"},"2.",-1)),Te=I(()=>l("div",{class:"config-life-body_life-item__text"},"已经走过的生命",-1)),Le={style:{flex:"auto"}},Oe=V({__name:"config-life-drawer",props:{formData:null},emits:["changeConfig"],setup(e,{expose:t,emit:n}){const o=e,g={birthday:"",age:"",gridNum:"",pastBackgroundColor:"",lifeData:[]},a=F(g),i=F(!1);function _(){i.value=!0}function h(C){a.value.lifeData.splice(C,1)}function d(){i.value=!1}async function m(){try{await Ne(a.value),n("changeConfig",a.value),i.value=!1}catch(C){ce.warning(C.message)}}const s=()=>{a.value.lifeData.push({frequency:"day",event:"",time:"",timeUnit:"hour",backgroundColor:"#ffffff"})};function v(){a.value=JSON.parse(JSON.stringify(o.formData))}function f(){a.value=g}return A(()=>i.value,()=>{i.value&&v(),i.value||f()}),t({openDrawer:_}),(C,k)=>{const Y=K,T=W,L=j,y=ue,M=re;return u(),G(M,{modelValue:i.value,"onUpdate:modelValue":k[3]||(k[3]=b=>i.value=b),size:"850"},{header:x(()=>[Ie]),default:x(()=>[l("div",Fe,[l("div",Ue,[Ee,Se,r(Y,{modelValue:a.value.birthday,"onUpdate:modelValue":k[0]||(k[0]=b=>a.value.birthday=b),style:{width:"240px"},type:"date",format:"YYYY-MM-DD","disabled-date":c(te),"value-format":"YYYY-MM-DD",placeholder:"请选择"},null,8,["modelValue","disabled-date"]),Me,r(T,{modelValue:a.value.age,"onUpdate:modelValue":k[1]||(k[1]=b=>a.value.age=b),maxlength:3,style:{width:"80px"},placeholder:"请输入"},null,8,["modelValue"]),qe]),l("div",Be,[Ye,Te,r(L,{modelValue:a.value.pastBackgroundColor,"onUpdate:modelValue":k[2]||(k[2]=b=>a.value.pastBackgroundColor=b)},null,8,["modelValue"])]),(u(!0),p(U,null,E(a.value.lifeData,(b,D)=>(u(),G(we,{key:D,class:"config-life-body_life-item","life-item-index":D,"life-item-data":b,onHandleDelete:h},null,8,["life-item-index","life-item-data"]))),128)),r(y,{onClick:s},{default:x(()=>[z("新增一行")]),_:1})])]),footer:x(()=>[l("div",Le,[r(y,{onClick:d},{default:x(()=>[z("取消")]),_:1}),r(y,{type:"primary",onClick:m},{default:x(()=>[z("确定")]),_:1})])]),_:1},8,["modelValue"])}}});const Ge=N(Oe,[["__scopeId","data-v-a0c5cbde"]]),Pe=e=>(q("data-v-1d9a32e1"),e=e(),B(),e),ze={class:"block-item"},Ae={class:"block-item_title"},Je={class:"block-item_title-left"},He=Pe(()=>l("div",{class:"block-item_title-left__line"},null,-1)),Re={class:"block-item_title-left__text"},We={class:"item_title-right"},je={class:"block-item_content"},Ke=V({__name:"block-item",props:{title:null},setup(e){return(t,n)=>(u(),p("div",ze,[l("div",Ae,[l("div",Je,[He,l("div",Re,$(e.title),1)]),l("div",We,[J(t.$slots,"option",{},void 0,!0)])]),l("div",je,[J(t.$slots,"default",{},void 0,!0)])]))}});const O=N(Ke,[["__scopeId","data-v-1d9a32e1"]]),Qe={class:"grid-life"},Xe={key:0,class:"iconfont icon-aixin love"},Ze=V({__name:"grid-life",props:{grids:null},setup(e){const t=e,n=o=>["爱人","对象","女朋友","媳妇","老婆","另一半","妻子"].some(a=>o.includes(a));return(o,g)=>(u(),p("div",Qe,[l("div",{class:"grid-container",style:S({"grid-template-columns":e.grids.length===400?"repeat(20, 20px)":"repeat(30, 20px)"})},[(u(!0),p(U,null,E(t.grids,a=>(u(),p("div",{key:a.id,class:_e(["grid",a.className]),style:S({backgroundColor:a.backgroundColor})},[n(a.event)?(u(),p("i",Xe)):fe("",!0)],6))),128))],4)]))}});const et=N(Ze,[["__scopeId","data-v-e35c7d1f"]]),tt={class:"your-life"},lt={class:"title"},ot={class:"lifeTime-box"},nt={class:"text"},it={class:"unit"},at=V({__name:"your-life",props:{lifeTime:null,title:null},setup(e){const t={year:"年",month:"月",day:"天",hour:"时",minute:"分",second:"秒"},n=Object.keys(t);return(o,g)=>(u(),p("div",tt,[l("div",null,[l("div",lt,$(e.title),1),l("div",ot,[(u(!0),p(U,null,E(c(n),(a,i)=>(u(),p("div",{key:i,class:"content"},[l("div",nt,$(e.lifeTime[a]),1),l("div",it,$(t[a]),1)]))),128))])])]))}});const R=N(at,[["__scopeId","data-v-98b98095"]]),oe=e=>(q("data-v-ad106e12"),e=e(),B(),e),st={class:"grid-meaning"},dt={class:"grid-meaning__item"},rt={class:"grid-meaning__item__text"},ct={class:"grid-meaning__item__text"},ut=oe(()=>l("div",{class:"grid-meaning__item"},[l("div",{class:"grid-meaning__item__color",style:{backgroundColor:"#e2e2e2"}}),l("div",{class:"grid-meaning__item__text"},"这是除了以上之外，你剩下的所有时光")],-1)),_t=oe(()=>l("div",null,"数据仅供娱乐，人生苦短，继续努力吧 ~",-1)),ft=V({__name:"grid-meaning",props:{formData:null},setup(e){return(t,n)=>(u(),p("div",st,[l("div",dt,[l("div",{class:"grid-meaning__item__color",style:S({backgroundColor:e.formData.pastBackgroundColor})},null,4),l("div",rt,$(`你于 ${e.formData.birthday} 出生，你可以活 ${e.formData.age} 年，这是你已经走过的生命`),1)]),(u(!0),p(U,null,E(e.formData.lifeData,o=>(u(),p("div",{key:o.event,class:"grid-meaning__item"},[l("div",{class:"grid-meaning__item__color",style:S({backgroundColor:o.backgroundColor})},null,4),l("div",ct,$(`这代表着在你余下的生命中，你会用每 ${c(H)(o.frequency,c(Q))}
           ${o.time}
           ${c(H)(o.timeUnit,c(X))} 来${o.event}`),1)]))),128)),ut,_t]))}});const mt=N(ft,[["__scopeId","data-v-ad106e12"]]),ne=e=>(q("data-v-260d768c"),e=e(),B(),e),vt={class:"life-grid"},pt={class:"life-grid__content"},gt={class:"life-grid__content__core"},yt={class:"config-life"},ht=ne(()=>l("div",{style:{"margin-right":"16px","white-space":"nowrap"}},"选择你的生日",-1)),bt={style:{display:"flex",gap:"8px","align-items":"baseline"}},xt=ne(()=>l("div",{style:{height:"32px"}},null,-1)),kt=V({__name:"index",setup(e){const t=F({birthday:"1998-03-09",age:"60",pastBackgroundColor:"#98c3b9",gridNum:"400",lifeData:[{frequency:"day",event:"睡觉",time:"8",timeUnit:"hour",backgroundColor:"#2486b9"},{frequency:"day",event:"工作",time:"8",timeUnit:"hour",backgroundColor:"#ab9f93"},{frequency:"day",event:"陪伴爱人",time:"2",timeUnit:"hour",backgroundColor:"#ed3321"},{frequency:"year",event:"陪伴父母",time:"10",timeUnit:"day",backgroundColor:"#e7a23f"},{frequency:"month",event:"陪伴孩子",time:"2",timeUnit:"day",backgroundColor:"#43b244"}]}),{pastTime:n,remainTime:o,grids:g}=ge(t),a=F();function i(){a.value.openDrawer()}const _=d=>{t.value.gridNum=d.toString()},h=d=>{t.value=d};return(d,m)=>{const s=K,v=ve;return u(),p("div",vt,[l("div",pt,[l("div",gt,[r(O,{title:"分配人生"},{default:x(()=>[l("div",yt,[ht,r(s,{modelValue:t.value.birthday,"onUpdate:modelValue":m[0]||(m[0]=f=>t.value.birthday=f),style:{width:"100%"},type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","disabled-date":c(te),placeholder:"选择你的生日"},null,8,["modelValue","disabled-date"]),r(v,{style:{"margin-left":"16px",cursor:"pointer","font-size":"20px"},onClick:i},{default:x(()=>[r(c(me))]),_:1})])]),_:1}),r(O,{title:"你的人生"},{default:x(()=>[r(R,{"life-time":c(n),title:"已经过去了"},null,8,["life-time"]),r(R,{"life-time":c(o),title:"剩余的时间"},null,8,["life-time"])]),_:1}),r(O,{title:"人生小格"},{option:x(()=>[l("div",bt,[l("div",null,$(`当前格子数量: ${t.value.gridNum}`),1),l("i",{class:"iconfont icon-category cp",style:S({color:Number(t.value.gridNum)===400?"#409EFF":"",fontSize:Number(t.value.gridNum)===400?"20px":"18px"}),onClick:m[1]||(m[1]=f=>_(400))},null,4),l("i",{class:"iconfont icon-9Grids_video cp",style:S({color:Number(t.value.gridNum)===900?"#409EFF":"",fontSize:Number(t.value.gridNum)===900?"18px":"16px"}),onClick:m[2]||(m[2]=f=>_(900))},null,4)])]),default:x(()=>[r(et,{grids:c(g)},null,8,["grids"])]),_:1}),r(O,{title:"格子含义"},{default:x(()=>[r(mt,{"form-data":t.value},null,8,["form-data"])]),_:1}),xt]),r(Ge,{ref_key:"configDrawer",ref:a,"form-data":t.value,onChangeConfig:h},null,8,["form-data"])])])}}});const $t=N(kt,[["__scopeId","data-v-260d768c"]]);export{$t as default};
