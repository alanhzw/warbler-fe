import{E as J,r as S,v as G,h as w,w as R,n as ie,x as se,e as N,o as _,c as y,b as o,t as D,g as d,y as m,F as E,j as M,z as P,u as r,A as de,B as re,C as A,D as K,p as Y,a as O,_ as I,G as ce,d as z,H as Q,I as ue,J as H,k as _e,K as q,l as fe,f as me,s as ve,L as pe,M as ge,N as ye,O as he,P as be}from"./index-dd309f93.js";const X=[{label:"年",value:"year"},{label:"月",value:"month"},{label:"天",value:"day"}],Z=[{label:"天",value:"day"},{label:"小时",value:"hour"},{label:"分种",value:"minute"},{label:"秒",value:"second"}],ee={day:365,month:12,year:1},te={second:1*1e3,minute:1*1e3*60,hour:1*1e3*60*60,day:1*1e3*60*60*24};const W=(e,t)=>{const l=t.find(n=>n.value===e);return l==null?void 0:l.label},le=e=>{const t=new Date,l=new Date(1950,0,1);return e<l||e>t},xe=e=>{function t(){e(),requestAnimationFrame(t)}requestAnimationFrame(t)};async function ke(e){try{await navigator.clipboard.writeText(e),J.success("复制成功")}catch{J.error("复制失败")}}const Ce=e=>{const t=S(G());xe(()=>{t.value=G()});const l=w(()=>G(e.value.birthday)),n=w(()=>l.value.add(Number(e.value.age),"year")),h=w(()=>n.value.diff(l.value,"millisecond")),s=w(()=>({year:t.value.diff(l.value,"year",!0).toFixed(1),month:t.value.diff(l.value,"month",!0).toFixed(1),day:t.value.diff(l.value,"day",!0).toFixed(1),hour:t.value.diff(l.value,"hour",!0).toFixed(1),minute:t.value.diff(l.value,"minute",!0).toFixed(1),second:t.value.diff(l.value,"second",!0).toFixed(),millisecond:t.value.diff(l.value,"millisecond",!0).toFixed()})),a=w(()=>({year:n.value.diff(t.value,"year",!0).toFixed(1),month:n.value.diff(t.value,"month",!0).toFixed(1),day:n.value.diff(t.value,"day",!0).toFixed(1),hour:n.value.diff(t.value,"hour",!0).toFixed(1),minute:n.value.diff(t.value,"minute",!0).toFixed(1),second:n.value.diff(t.value,"second",!0).toFixed(),millisecond:n.value.diff(t.value,"millisecond",!0).toFixed()})),f=u=>{const{frequency:p,time:i,timeUnit:c}=u;return ee[p]*te[c]*Number(i)},b=w(()=>{const u=Array.from({length:Number(e.value.gridNum)},(c,v)=>({id:v,backgroundColor:"#e2e2e2",className:"",event:""})),p=e.value.lifeData.map(c=>({...c,millisecond:f(c)*Number(a.value.year)}));p.unshift({frequency:"",event:"",time:"",timeUnit:"",backgroundColor:e.value.pastBackgroundColor,millisecond:Number(s.value.millisecond),className:"past"});let i=0;return p.forEach(c=>{const v=Number((c.millisecond/h.value).toFixed(2)),C=Math.floor(v*u.length);Array.from({length:C}).forEach(()=>{i<u.length&&(u[i].backgroundColor=c.backgroundColor,u[i].className=c.className||"",u[i].event=c.event),i+=1})}),u});return{pastTime:s,deathTime:n,remainTime:a,grids:b}};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $e=e=>typeof e<"u";function we(e){return JSON.parse(JSON.stringify(e))}function De(e,t,l,n={}){var h,s,a;const{clone:f=!1,passive:b=!1,eventName:u,deep:p=!1,defaultValue:i,shouldEmit:c}=n,v=se(),C=l||(v==null?void 0:v.emit)||((h=v==null?void 0:v.$emit)==null?void 0:h.bind(v))||((a=(s=v==null?void 0:v.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(v==null?void 0:v.proxy));let g=u;t||(t="modelValue"),g=g||`update:${t.toString()}`;const U=x=>f?typeof f=="function"?f(x):we(x):x,$=()=>$e(e[t])?U(e[t]):i,L=x=>{c?c(x)&&C(g,x):C(g,x)};if(b){const x=$(),T=S(x);let k=!1;return R(()=>e[t],V=>{k||(k=!0,T.value=U(V),ie(()=>k=!1))}),R(T,V=>{!k&&(V!==e[t]||p)&&L(V)},{deep:p}),T}else return w({get(){return $()},set(x){L(x)}})}const oe=e=>(Y("data-v-ca9f239e"),e=e(),O(),e),Ve={class:"life-item"},Ne={class:"life-item__no"},Ie=oe(()=>o("div",{class:"life-item__text"},"你平均每",-1)),Fe=oe(()=>o("div",{class:"life-item__text"},"的时间为",-1)),Ue=N({__name:"life-item",props:{lifeItemData:null,lifeItemIndex:null},emits:["update:lifeItemData","handleDelete"],setup(e,{emit:t}){const l=e,n=De(l,"lifeItemData",t),h=()=>{t("handleDelete",l.lifeItemIndex)};return(s,a)=>{const f=de,b=re,u=A,p=K;return _(),y("div",Ve,[o("div",Ne,D(`${e.lifeItemIndex+3}.`),1),Ie,d(b,{modelValue:r(n).frequency,"onUpdate:modelValue":a[0]||(a[0]=i=>r(n).frequency=i),placeholder:"请选择",style:{width:"100px"}},{default:m(()=>[(_(!0),y(E,null,M(r(X),i=>(_(),P(f,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(u,{modelValue:r(n).event,"onUpdate:modelValue":a[1]||(a[1]=i=>r(n).event=i),clearable:"","show-word-limit":"",maxlength:10,style:{width:"240px","margin-left":"8px"},placeholder:"请输入"},null,8,["modelValue"]),Fe,d(u,{modelValue:r(n).time,"onUpdate:modelValue":a[2]||(a[2]=i=>r(n).time=i),maxlength:3,style:{width:"80px"},placeholder:"请输入"},null,8,["modelValue"]),d(b,{modelValue:r(n).timeUnit,"onUpdate:modelValue":a[3]||(a[3]=i=>r(n).timeUnit=i),placeholder:"请选择",style:{width:"100px",margin:"0 8px"}},{default:m(()=>[(_(!0),y(E,null,M(r(Z),i=>(_(),P(f,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(p,{modelValue:r(n).backgroundColor,"onUpdate:modelValue":a[4]||(a[4]=i=>r(n).backgroundColor=i)},null,8,["modelValue"]),o("i",{class:"iconfont icon-shanchu",style:{"margin-left":"8px",cursor:"pointer"},onClick:h})])}}});const Se=I(Ue,[["__scopeId","data-v-ca9f239e"]]),Ee=e=>{const{frequency:t,time:l,timeUnit:n}=e;return ee[t]*te[n]*Number(l)/365},Me=e=>new Promise((t,l)=>{Number(e.age)>100&&l(new Error("你还想活多久，长生不老得了呗")),e.lifeData.every(a=>{const{frequency:f,time:b,timeUnit:u}=a;return f&&b&&u})||l(new Error("你瞎啊，看不见有没填的吗")),e.lifeData.reduce((a,f)=>a+Ee(f),0)>24*60*60*1e3&&l(new Error("每天都超过 24 小时了，你咋不上天呢")),e.lifeData.some((a,f)=>e.lifeData.some((b,u)=>f!==u&&a.backgroundColor===b.backgroundColor)||a.backgroundColor===e.pastBackgroundColor)&&l(new Error("用一样的色儿，你能分出来吗")),t(!0)}),F=e=>(Y("data-v-01d5a1ee"),e=e(),O(),e),qe=F(()=>o("div",{class:"config-life-drawer_header"},"分配人生",-1)),Te={class:"config-life-body"},Be={class:"config-life-body_life-item"},Ye=F(()=>o("div",{class:"config-life-body_life-item__no"},"1.",-1)),Oe=F(()=>o("div",{class:"config-life-body_life-item__text"},"你于",-1)),Le=F(()=>o("div",{class:"config-life-body_life-item__text"},"出生，你能活到",-1)),Re=F(()=>o("div",{class:"config-life-body_life-item__text"},"岁",-1)),Pe={class:"config-life-body_life-item"},Ge=F(()=>o("div",{class:"config-life-body_life-item__no"},"2.",-1)),ze=F(()=>o("div",{class:"config-life-body_life-item__text"},"已经走过的生命",-1)),Je={style:{flex:"auto"}},Ae=N({__name:"config-life-drawer",props:{formData:null},emits:["changeConfig"],setup(e,{expose:t,emit:l}){const n=e,h={birthday:"",age:"",gridNum:"",pastBackgroundColor:"",lifeData:[]},s=S(h),a=S(!1);function f(){a.value=!0}function b(C){s.value.lifeData.splice(C,1)}function u(){a.value=!1}async function p(){try{await Me(s.value),l("changeConfig",s.value),a.value=!1}catch(C){J.warning(C.message)}}const i=()=>{s.value.lifeData.push({frequency:"day",event:"",time:"",timeUnit:"hour",backgroundColor:"#ffffff"})};function c(){s.value=JSON.parse(JSON.stringify(n.formData))}function v(){s.value=h}return R(()=>a.value,()=>{a.value&&c(),a.value||v()}),t({openDrawer:f}),(C,g)=>{const U=Q,$=A,L=K,x=ue,T=ce;return _(),P(T,{modelValue:a.value,"onUpdate:modelValue":g[3]||(g[3]=k=>a.value=k),size:"850"},{header:m(()=>[qe]),default:m(()=>[o("div",Te,[o("div",Be,[Ye,Oe,d(U,{modelValue:s.value.birthday,"onUpdate:modelValue":g[0]||(g[0]=k=>s.value.birthday=k),style:{width:"240px"},type:"date",format:"YYYY-MM-DD",editable:!1,clearable:!1,"disabled-date":r(le),"value-format":"YYYY-MM-DD",placeholder:"请选择"},null,8,["modelValue","disabled-date"]),Le,d($,{modelValue:s.value.age,"onUpdate:modelValue":g[1]||(g[1]=k=>s.value.age=k),maxlength:3,style:{width:"80px"},placeholder:"请输入"},null,8,["modelValue"]),Re]),o("div",Pe,[Ge,ze,d(L,{modelValue:s.value.pastBackgroundColor,"onUpdate:modelValue":g[2]||(g[2]=k=>s.value.pastBackgroundColor=k)},null,8,["modelValue"])]),(_(!0),y(E,null,M(s.value.lifeData,(k,V)=>(_(),P(Se,{key:V,class:"config-life-body_life-item","life-item-index":V,"life-item-data":k,onHandleDelete:b},null,8,["life-item-index","life-item-data"]))),128)),d(x,{onClick:i},{default:m(()=>[z("新增一行")]),_:1})])]),footer:m(()=>[o("div",Je,[d(x,{onClick:u},{default:m(()=>[z("取消")]),_:1}),d(x,{type:"primary",onClick:p},{default:m(()=>[z("确定")]),_:1})])]),_:1},8,["modelValue"])}}});const He=I(Ae,[["__scopeId","data-v-01d5a1ee"]]),We=e=>(Y("data-v-89541ad6"),e=e(),O(),e),je={class:"block-item"},Ke={class:"block-item_title"},Qe={class:"block-item_title-left"},Xe=We(()=>o("div",{class:"block-item_title-left__line"},null,-1)),Ze={class:"block-item_title-left__text"},et={class:"item_title-right"},tt={class:"block-item_content"},lt=N({__name:"block-item",props:{title:null},setup(e){return(t,l)=>(_(),y("div",je,[o("div",Ke,[o("div",Qe,[Xe,o("div",Ze,D(e.title),1)]),o("div",et,[H(t.$slots,"option",{},void 0,!0)])]),o("div",tt,[H(t.$slots,"default",{},void 0,!0)])]))}});const B=I(lt,[["__scopeId","data-v-89541ad6"]]),ot={class:"grid-life"},nt={key:0,class:"iconfont icon-aixin love"},at=N({__name:"grid-life",props:{grids:null},setup(e){const t=e,l=n=>["爱人","对象","女朋友","媳妇","老婆","另一半","妻子"].some(s=>n.includes(s));return(n,h)=>(_(),y("div",ot,[o("div",{class:"grid-container",style:q({"grid-template-columns":e.grids.length===400?"repeat(20, 20px)":"repeat(30, 20px)"})},[(_(!0),y(E,null,M(t.grids,s=>(_(),y("div",{key:s.id,class:_e(["grid cp",s.className]),style:q({backgroundColor:s.backgroundColor})},[l(s.event)?(_(),y("i",nt)):fe("",!0)],6))),128))],4)]))}});const it=I(at,[["__scopeId","data-v-4da4b5b9"]]),st={class:"your-life"},dt={class:"title"},rt={class:"lifeTime-box"},ct={class:"text"},ut={class:"unit"},_t=N({__name:"your-life",props:{lifeTime:null,title:null},setup(e){const t={year:"年",month:"月",day:"天",hour:"时",minute:"分",second:"秒"},l=Object.keys(t);return(n,h)=>(_(),y("div",st,[o("div",null,[o("div",dt,D(e.title),1),o("div",rt,[(_(!0),y(E,null,M(r(l),(s,a)=>(_(),y("div",{key:a,class:"content"},[o("div",ct,D(e.lifeTime[s]),1),o("div",ut,D(t[s]),1)]))),128))])])]))}});const j=I(_t,[["__scopeId","data-v-136af7af"]]),ne=e=>(Y("data-v-5424917e"),e=e(),O(),e),ft={class:"grid-meaning"},mt={class:"grid-meaning__item"},vt={class:"grid-meaning__item__text"},pt={class:"grid-meaning__item__text"},gt=ne(()=>o("div",{class:"grid-meaning__item"},[o("div",{class:"grid-meaning__item__color",style:{backgroundColor:"#e2e2e2"}}),o("div",{class:"grid-meaning__item__text"},"这是除了以上之外，你剩下的所有时光")],-1)),yt=ne(()=>o("div",null,"数据仅供娱乐，人生苦短，继续努力吧 ~",-1)),ht=N({__name:"grid-meaning",props:{formData:null},setup(e){return(t,l)=>(_(),y("div",ft,[o("div",mt,[o("div",{class:"grid-meaning__item__color",style:q({backgroundColor:e.formData.pastBackgroundColor})},null,4),o("div",vt,D(`你于 ${e.formData.birthday} 出生，你可以活 ${e.formData.age} 年，这是你已经走过的生命`),1)]),(_(!0),y(E,null,M(e.formData.lifeData,n=>(_(),y("div",{key:n.event,class:"grid-meaning__item"},[o("div",{class:"grid-meaning__item__color",style:q({backgroundColor:n.backgroundColor})},null,4),o("div",pt,D(`这代表着在你余下的生命中，你会用每 ${r(W)(n.frequency,r(X))}
           ${n.time}
           ${r(W)(n.timeUnit,r(Z))} 来${n.event}`),1)]))),128)),gt,yt]))}});const bt=I(ht,[["__scopeId","data-v-5424917e"]]),ae=e=>(Y("data-v-a6f67c0e"),e=e(),O(),e),xt={class:"life-grid"},kt={class:"life-grid__content"},Ct={class:"life-grid__content__core"},$t={class:"config-life"},wt=ae(()=>o("div",{style:{"margin-right":"16px","white-space":"nowrap"}},"选择你的生日",-1)),Dt={style:{display:"flex",gap:"8px","align-items":"baseline"}},Vt={class:"share-link"},Nt=ae(()=>o("div",{style:{height:"32px"}},null,-1)),It=N({__name:"index",setup(e){const t=ve(),l=S({birthday:"1998-03-09",age:"60",pastBackgroundColor:"#98c3b9",gridNum:"400",lifeData:[{frequency:"day",event:"睡觉",time:"7",timeUnit:"hour",backgroundColor:"#2486b9"},{frequency:"day",event:"工作",time:"9.5",timeUnit:"hour",backgroundColor:"#ab9f93"},{frequency:"day",event:"陪伴爱人",time:"2",timeUnit:"hour",backgroundColor:"#ed3321"},{frequency:"year",event:"陪伴父母",time:"10",timeUnit:"day",backgroundColor:"#e7a23f"}]}),{pastTime:n,remainTime:h,grids:s}=Ce(l),a=S();function f(){a.value.openDrawer()}const b=i=>{l.value.gridNum=i.toString()},u=i=>{l.value=i},p=w(()=>window.location.host+t.currentRoute.value.fullPath);return R(()=>l.value,()=>{t.replace({query:{...t.currentRoute.value.query,config:encodeURI(JSON.stringify(l.value))}})},{deep:!0}),me(()=>{const{config:i}=t.currentRoute.value.query;i&&(l.value=JSON.parse(decodeURI(i)))}),(i,c)=>{const v=Q,C=he,g=be,U=A;return _(),y("div",xt,[o("div",kt,[o("div",Ct,[d(B,{title:"分配人生"},{default:m(()=>[o("div",$t,[wt,d(v,{modelValue:l.value.birthday,"onUpdate:modelValue":c[0]||(c[0]=$=>l.value.birthday=$),style:{width:"100%"},type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:!1,editable:!1,"disabled-date":r(le),placeholder:"选择你的生日"},null,8,["modelValue","disabled-date"]),d(g,{effect:"dark",content:"配置人生",placement:"top"},{default:m(()=>[d(C,{style:{"margin-left":"16px",cursor:"pointer","font-size":"20px"},onClick:f},{default:m(()=>[d(r(pe))]),_:1})]),_:1})])]),_:1}),d(B,{title:"你的人生"},{default:m(()=>[d(j,{"life-time":r(n),title:"已经过去了"},null,8,["life-time"]),d(j,{"life-time":r(h),title:"剩余的时间"},null,8,["life-time"])]),_:1}),d(B,{title:"人生小格"},{option:m(()=>[o("div",Dt,[o("div",null,D(`格子数量: ${l.value.gridNum}`),1),o("i",{class:"iconfont icon-category cp",style:q({color:Number(l.value.gridNum)===400?"#409EFF":"",fontSize:Number(l.value.gridNum)===400?"20px":"18px"}),onClick:c[1]||(c[1]=$=>b(400))},null,4),o("i",{class:"iconfont icon-9Grids_video cp",style:q({color:Number(l.value.gridNum)===900?"#409EFF":"",fontSize:Number(l.value.gridNum)===900?"18px":"16px"}),onClick:c[2]||(c[2]=$=>b(900))},null,4)])]),default:m(()=>[d(it,{grids:r(s),onClick:f},null,8,["grids"])]),_:1}),d(B,{title:"格子含义"},{default:m(()=>[d(bt,{"form-data":l.value},null,8,["form-data"])]),_:1}),d(B,{title:"分享链接"},{default:m(()=>[o("div",Vt,[d(U,{modelValue:r(p),"onUpdate:modelValue":c[3]||(c[3]=$=>ge(p)?p.value=$:null),readonly:""},null,8,["modelValue"]),d(g,{effect:"dark",content:"复制链接",placement:"top"},{default:m(()=>[d(C,{class:"cp",style:{"font-size":"20px"},onClick:c[4]||(c[4]=$=>r(ke)(r(p)))},{default:m(()=>[d(r(ye))]),_:1})]),_:1})])]),_:1}),Nt]),d(He,{ref_key:"configDrawer",ref:a,"form-data":l.value,onChangeConfig:u},null,8,["form-data"])])])}}});const Ut=I(It,[["__scopeId","data-v-a6f67c0e"]]);export{Ut as default};
